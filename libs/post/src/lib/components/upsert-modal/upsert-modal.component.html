<ion-header mode="md">
  <ion-toolbar color="primary">

    <ion-buttons slot="end">
      <ion-button (click)="dismiss()">
        <ion-icon slot="icon-only" name="close"></ion-icon>
      </ion-button>
    </ion-buttons>

    <ion-title>Create Post</ion-title>

  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <p><small>Create a memory for a lifetime. Someday you'll look back at your goals and see this post.</small></p>

  <form [formGroup]="postForm">

    <media-image-selector 
      [form]="postForm.get('mediaURL')"
      [storagePath]="'goals/' + goalId + '/posts/' + postId">
    </media-image-selector>

    <ion-item>
      <ion-label color="primary" stacked>Title</ion-label>
      <ion-input formControlName="title" placeholder="..." autocapitalize="sentences"></ion-input>
    </ion-item>

    <ion-item>
      <ion-label color="primary" stacked>Description</ion-label>
      <ion-textarea autoGrow formControlName="description" placeholder="..." autocapitalize="sentences"></ion-textarea>
    </ion-item>

    <ion-item>
      <ion-label color="primary" stacked>
        <ion-icon name="calendar-outline"></ion-icon>
      </ion-label>
      <ion-input (ionFocus)="openDatePicker()" placeholder="Date" [value]="postForm.date.value | date:'longDate'"></ion-input>
    </ion-item>

    <ion-item>
      <ion-label color="primary" stacked>
        <ion-icon name="link-outline"></ion-icon>
      </ion-label>
      <ion-input formControlName="url" type="url" placeholder="Link (auto fetch image and title)"></ion-input>
      <ion-spinner *ngIf="scrapingUrl" slot="end" name="bubbles" color="primary"></ion-spinner>
    </ion-item>
  </form>

</ion-content>

<ion-footer>
  <ion-toolbar>
    <ion-buttons slot="end">
      <ion-button (click)="submitPost()" fill="solid" color="primary">Submit to Story</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-footer>
