<swiper [effect]="'cards'" [grabCursor]="true" [navigation]="isDesktop$ | async">

  <ng-template swiperSlide>
    <form [formGroup]="form">
      <section>
        <span class="question">What are three things you are grateful for today?</span>
        <ion-item>
          <span class="disc">•</span>
          <ion-textarea rows="3" formControlName="item1" autoGrow></ion-textarea>
        </ion-item>
        <ion-item>
          <span class="disc">•</span>
          <ion-textarea rows="3" formControlName="item2" autoGrow></ion-textarea>
        </ion-item>
        <ion-item>
          <span class="disc">•</span>
          <ion-textarea rows="3" formControlName="item3" autoGrow></ion-textarea>
        </ion-item>
      </section>
  
      <ion-button (click)="save()" [disabled]="form.pristine" color="primary" fill="clear">
        <ng-container *ngIf="save$ | async as status">

          <ng-container *ngIf="status === 'saved'">
            <span>SAVED</span>
            <ion-icon name="checkmark" slot="end"></ion-icon>
          </ng-container>

          <ng-container *ngIf="status === 'saving'">
            <span>Encrypting...</span>
          </ng-container>

          <ng-container *ngIf="status === 'save'">
            <span>SAVE</span>
          </ng-container>

        </ng-container>
      </ion-button>
    </form>
  </ng-template>

  <ng-container *ngFor="let card of cards$ | async">
    <ng-template swiperSlide>
      <section class="card">
        <span class="date">{{ card.createdAt | date:'longDate' }}</span>

        <ul>
          <li *ngFor="let item of card.items">
            <span class="disc">•</span>
            {{ item }}
          </li>
        </ul>
      </section>
    </ng-template>
  </ng-container>

</swiper>
