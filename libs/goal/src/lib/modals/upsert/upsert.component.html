<ion-header mode="md">
  <ion-toolbar color="primary">

    <ion-buttons slot="end">
      <ion-button (click)="close()">
        <ion-icon slot="icon-only" name="close" />
      </ion-button>
    </ion-buttons>

    <ion-title>{{ mode === 'create' ? 'Create' : 'Edit'}} Goal</ion-title>

  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <ng-container *ngIf="mode === 'create' else update">
    <swiper #swiper [allowTouchMove]="false" *ngIf="goal.id">
      <ng-template swiperSlide>
        <strive-goal-slide-1 [form]="form" />
      </ng-template>
      <!-- <ng-container *ngIf="focus">
        <ng-template swiperSlide>
          <strive-goal-slide-2 [goalId]="goal.id" />
        </ng-template>
      </ng-container> -->
      <ng-template swiperSlide>
        <strive-goal-slide-3 [form]="form" [goalId]="goal.id" />
      </ng-template>
      <ng-template swiperSlide>
        <strive-goal-slide-4 [goal]="goal" [suggestion]="suggestion$ | async" />
      </ng-template>
      <ng-template swiperSlide>
        <strive-goal-slide-5 [form]="form" [goalId]="goal.id" />
      </ng-template>
    </swiper>
  </ng-container>

  <ng-template #update>
    <strive-goal-slide-update [form]="form" [goalId]="goal.id" (saved)="close()" />
  </ng-template>
</ion-content>

<ion-footer *ngIf="mode === 'create'">
  <ion-toolbar>
    <ion-buttons *ngIf="this.swiper?.swiperRef?.isBeginning === false" slot="start">
      <ion-button (click)="stepper('previous')" fill="clear" color="primary">Previous</ion-button>
    </ion-buttons>

    <ion-buttons slot="end">
      <ion-button (click)="stepper('next')" [disabled]="form.invalid" color="primary" fill="solid">
        {{ this.swiper?.swiperRef?.isEnd ? 'Finish' : 'Next' }}
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-footer>