<small>Visualizing what the end result looks like will help filter out distractions and increase the chance of you reaching your goal. What does your end result look like?</small>

<ion-item [ngStyle]="{'display': showImageSelector ? 'block' : 'none'}">
  <strive-image-selector
    [form]="form.image"
    [storagePath]="'goals/' + goalId"
    defaultImage="goal.png"
  />
</ion-item>

<header>
  <ion-searchbar
    [formControl]="queryCtrl"
    placeholder='Try "Finish line"'
    inputmode="search"
    mode="md"
    class="ion-no-padding">
  </ion-searchbar>
  <ion-button class="primary" (click)="upload()">
    <ion-icon slot="icon-only" name="images-outline"></ion-icon>
  </ion-button>
</header>
<small class="poweredby">Powered by Pexels&#8482;</small>

<ng-container *ngIf="images$ | async as images; else loading">
  <ng-container *ngIf="images; else loading">

    <ul *ngIf="images.length; else empty">
      <ng-container *ngFor="let i of images">
        <li [ngStyle]="{'selected': i.selected}" (click)="selectImage(i.image)">
          <img [src]="i.image">
          <div *ngIf="i.selected">
            <ion-button color="primary" (click)="chooseImage(i.image)">
              CHOOSE
            </ion-button>
          </div>
        </li>
      </ng-container>
    </ul>

  </ng-container>
</ng-container>

<ng-template #loading>
  <section>
    <ion-spinner name="lines" color="primary"></ion-spinner>
  </section>
</ng-template>

<ng-template #empty>
  <section>
    <p>Couldn't find any images</p>
  </section>
</ng-template>
