<ion-content>
  <form [formGroup]="form">
    <ion-item>
      <strive-milestone-status [goal]="goal" [milestone]="milestone" [isAdmin]="isAdmin" [isAchiever]="isAchiever"></strive-milestone-status>
      <ion-input [disabled]="!isAdmin" formControlName="content" placeholder="Type milestone"></ion-input>
      <ion-button *ngIf="canEdit" fill="clear" slot="end" (click)="deleteMilestone()">
        <ion-icon name="trash"></ion-icon>
      </ion-button>
    </ion-item>
    <ion-item>
      <strive-milestone-deadline [milestone]="milestone" [isAdmin]="isAdmin" (deadlineChange)="updateDeadline($event)"></strive-milestone-deadline>
    </ion-item>
  </form>

  <section fxLayout="column" fxLayoutGap="8px" class="ion-padding">
    <ng-container *ngIf="goal.numberOfAchievers > 1">
      <div fxLayout fxLayoutGap="8px">
        <b>Assignee:</b>
        <ng-container *ngIf="milestone.achiever.uid else empty">
          <goal-milestone-assignee [achiever]="milestone.achiever" (click)="toggleAssignMe()" class="clickable"></goal-milestone-assignee>
        </ng-container>
        <ng-template #empty>
          <i (click)="toggleAssignMe()" class="clickable">No one - Assign me</i>
        </ng-template>
      </div>
    </ng-container>  
    <small><b>Created at:</b> {{ milestone.createdAt.toDate() | date:'longDate' }}</small>
    <small *ngIf="milestone.finishedAt"><b>Finished at:</b> {{ milestone.finishedAt.toDate() | date:'longDate' }}</small>
  </section>
</ion-content>

