<ion-header>
  <ion-toolbar color="primary">

    <ion-buttons slot="end">
      <ion-button (click)="dismiss()">
        <ion-icon slot="icon-only" name="close"></ion-icon>
      </ion-button>
    </ion-buttons>
  
    <ion-title>{{ mode === 'create' ? 'Create' : 'Edit'}} Goal</ion-title>

  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <form [formGroup]="goalForm">

    <ion-item>
      <ion-label position="stacked">Title</ion-label>
      <ion-input formControlName="title" 
                 type="text"
                 autofocus></ion-input>
    </ion-item>
  
    <ion-item>
      <ion-label position="stacked">When Focus?</ion-label>
      <ion-select placeholder="Select Status" interface="popover" formControlName="status">
        <ion-select-option value="bucketlist">In future (bucket list)</ion-select-option>
        <ion-select-option value="active">Current focus</ion-select-option>
        <ion-select-option value="finished">Already finished (journaling)</ion-select-option>
      </ion-select>
    </ion-item>

    <ion-item>
      <ion-label position="stacked">Visible to</ion-label>
      <ion-select interface="popover" formControlName="isSecret"> 
        <ion-select-option [value]="false">Everyone</ion-select-option>
        <ion-select-option [value]="true">Only you</ion-select-option>
      </ion-select>
    </ion-item>

    <!-- TODO move it to editable on goal page or on edit goal only -->
    <!-- <ion-item>
      <ion-label position="stacked">End date &#40;optional&#41;</ion-label>
      <ion-datetime
        placeholder="-- -- --"
        displayFormat="DDDD DD MMMM YYYY"
        pickerFormat="DDDD MMMM YYYY" 
        formControlName="deadline"
        (click)="openingDatetime($event)"
      ></ion-datetime>
    </ion-item> -->

    <ion-item>
      <media-image-selector
        [form]="goalForm.image"
        [storagePath]="'goals/' + goalId"
        defaultImage="goal.jpeg"
      ></media-image-selector>
    </ion-item>
  </form>

  <ion-button (click)="upsert()" clear>{{ mode === 'create' ? 'Create' : 'Update'}}</ion-button>
</ion-content>