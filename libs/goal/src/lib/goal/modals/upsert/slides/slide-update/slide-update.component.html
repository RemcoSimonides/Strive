<form [formGroup]="form">

  <ion-list mode="md">
    <ion-item>
      <ion-label position="stacked">Title *</ion-label>
      <ion-input
        formControlName="title" 
        type="text"
        autocapitalize="sentences"
        autofocus
        maxlength="60"></ion-input>
    </ion-item>

    <ion-item>
      <ion-label position="stacked">When should the goal be finished? *</ion-label>
      <ion-input id="click-trigger" placeholder="dd/mm/yyyy" [value]="form.deadline.value | date:'longDate'"></ion-input>

      <ion-popover trigger="click-trigger" triggerAction="click" dismissOnSelect>
        <ng-template>
          <ion-content>
            <ion-list mode="md">
              <ion-item button (click)="deadlineSelect('1')">In 1 year</ion-item>
              <ion-item button (click)="deadlineSelect('end0')">End of this year</ion-item>
              <ion-item button (click)="deadlineSelect('end1')">End of next year</ion-item>
              <ion-item button (click)="deadlineSelect('3')">In 3 years</ion-item>
              <ion-item button (click)="deadlineSelect('10')">In 10 years</ion-item>
              <ion-item button (click)="deadlineSelect('custom')">Select a date</ion-item>
            </ion-list>
          </ion-content>
        </ng-template>
      </ion-popover>
    </ion-item>

    <ion-item>
      <ion-label position="stacked">Who can see this goal? *</ion-label>
      <ion-select interface="popover" formControlName="isSecret">
        <ion-select-option [value]="false">Everyone</ion-select-option>
        <ion-select-option [value]="true">Invited users only</ion-select-option>
      </ion-select>
    </ion-item>

    <ion-item>
      <media-image-selector
        [form]="form.image"
        [storagePath]="'goals/' + goalId"
        defaultImage="goal.png"
      ></media-image-selector>
    </ion-item>
  </ion-list>

</form>

<footer>
  <ion-button color="primary" (click)="save()" [disabled]="form.invalid">Save</ion-button>
</footer>