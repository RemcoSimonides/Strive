<ng-container *ngIf="notification | message:'user' as _message">
  <section fxLayout fxLayoutGap="8px">
    <article>
      <img
        class="source_image"
        [ref]="_message.image"
        [asset]="(_message.link | source) === 'user' ? 'profile.png' : 'goal.jpeg'"
        [ngStyle]="{'border-radius': (_message.link | source) === 'user' ? '50%' : '12px'}"
        [routerLink]="_message.link"
      />
    </article>
    <article fxLayout="column" fxFlex fxLayoutGap="4px">
      <div fxLayout fxLayoutAlign="space-between start">
        <h5 [routerLink]="_message.link">{{ _message.title }}</h5>
        <p class="date">{{ notification.createdAt.toDate() | date:'mediumDate' }}</p>
      </div>
      <span>
        <ng-container *ngFor="let message of _message.message">
          <ng-container *ngIf="message.link; else noLink">
            <a [routerLink]="'/' + message.link">{{ message.text }}</a>
          </ng-container>
          <ng-template #noLink>{{ message.text }}</ng-template>
        </ng-container>
      </span>

      <!-- Post -->
      <ng-container *ngIf="!!notification.source.postId">
        <post-main [author]="notification.source.user" [postRef]="'Goals/' + notification.source.goal.id + '/Posts/' + notification.source.postId"></post-main>
      </ng-container>

    </article>
  </section>

</ng-container>