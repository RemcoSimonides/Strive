<ion-header mode="md">
  <ion-toolbar>
    <ion-buttons slot="end">
      <ion-button (click)="dismiss()" color="primary">
        <ion-icon slot="icon-only" name="close-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content *ngIf="support" class="ion-padding">

  <main>
    <support-pledge [support]="support"></support-pledge>

    <section class="details">
      <ng-container *ngIf="support.status === 'open'">
        <small *ngIf="!support.milestone">Waiting for goal '{{ support.goal.title }}' to be finished</small>
        <small *ngIf="support.milestone">Waiting for milestone '{{ support.milestone.content }}' of goal '{{ support.goal.title }}' to be completed</small>
      </ng-container>

      <small class="gray">Supporter: {{ support.supporter.username }}</small>
      <small class="gray">Recipient: {{ support.recipient.username }}</small>
      <small class="gray">Created: {{ support.createdAt | date: 'medium' }}</small>
    </section>

    <section class="actions">
      <ng-container *ngIf="support.status === 'open'">
        <ion-button (click)="give()" class="secondary" expand="block">
          <span>Give to {{ support.recipient.username }}</span>
        </ion-button>
        <ion-button (click)="remove()" class="danger" expand="block">
          Remove Support
        </ion-button>
      </ng-container>
    </section>

  </main>

</ion-content>