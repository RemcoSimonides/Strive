<ion-header>
  <ion-toolbar color="primary">

    <ion-buttons slot="end">
      <ion-button (click)="dismiss()">
        <ion-icon slot="icon-only" name="close"></ion-icon>
      </ion-button>
    </ion-buttons>
  
    <ion-title>Create Collective Goal</ion-title>

  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">

  <form [formGroup]="collectiveGoalForm">

    <ion-item>
      <ion-label position="stacked">Title</ion-label>
      <ion-input formControlName="title" 
                type="text"
                maxlength="25"
                autofocus></ion-input>
    </ion-item>

    <ion-item>
        <ion-label position="stacked">Short description</ion-label>
        <ion-textarea formControlName="shortDescription"
                      type="text"
                      maxlength="256"
                      autoGrow></ion-textarea>
    </ion-item>

    <ion-item>
      <ion-label position="stacked">Secret</ion-label>
      <ion-select formControlName="isSecret" [value]="false" interface="popover">
        <ion-select-option [value]="false">No</ion-select-option>
        <ion-select-option [value]="true">Yes</ion-select-option>
      </ion-select>
    </ion-item>

    <ion-item>
        <ion-label position="stacked">End date &#40;optional&#41;</ion-label>
        <!-- <ion-datetime
          placeholder="-- -- --"
          displayFormat="DDDD DD MMMM YYYY"
          pickerFormat="DDDD MMMM YYYY" 
          formControlName="deadline"
          (click)="openDatetime($event)"
        ></ion-datetime> -->
      </ion-item>

      <media-image-selector 
        [form]="collectiveGoalForm.image"
        [storagePath]="'collectiveGoals/' + collectiveGoalId"
        defaultImage="collective-goal.jpeg"
      ></media-image-selector>

      <ion-button (click)="upsertCollectiveGoal()" clear>{{ state | titlecase }}</ion-button>
  </form>

</ion-content>
