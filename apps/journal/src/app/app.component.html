<ion-app>

  <!-- Side menu -->
  <!-- <section class="sidemenu">
    <ion-menu side="end" contentId="main">
      <ion-content>
        <ng-container *ngIf="user.profile$ | async as profile">
          <ion-row class="ion-justify-content-center">
            <img [ref]="profile.photoURL"
              asset="profile.png"
              routerDirection="root"
              [routerLink]="'/profile/' + user.uid" />
          </ion-row>
          <ion-row class="ion-justify-content-center">
            <h3>{{ profile.username }}</h3>
          </ion-row>
        </ng-container>
        <ion-list>
          <ion-menu-toggle auto-hide="false">
            <ng-container *ngIf="user.profile$ | async">
              <ion-item routerDirection="root" routerLink="/feed">
                <ion-icon slot="start" name="home-sharp"></ion-icon>
                <ion-label>Home</ion-label>
              </ion-item>
            </ng-container>

            <ion-item routerDirection="root" routerLink="/explore">
              <ion-icon slot="start" name="earth-sharp"></ion-icon>
              <ion-label>Explore</ion-label>
            </ion-item>

            <ng-container *ngIf="user.profile$ | async as profile; else notLoggedInSide">

              <ion-item routerDirection="root" routerLink="/notifications">
                <ion-icon slot="start" name="notifications" [ngClass]="{'badge': unreadNotifications$ | async}"></ion-icon>
                <ion-label>
                  <span>Notifications</span>
                </ion-label>
              </ion-item>
              <ion-item routerDirection="root" routerLink="/goals">
                <ion-icon slot="start" name="flag"></ion-icon>
                <ion-label>Goals</ion-label>
              </ion-item>
              <ion-item routerDirection="root" routerLink="/supports">
                <fa-icon [icon]="['fas', 'hand-holding-heart']" slot="start"></fa-icon>
                <ion-label>Supports</ion-label>
              </ion-item>
              <ion-item routerDirection="root" [routerLink]="'/profile/' + user.uid">
                <ion-icon slot="start" name="person"></ion-icon>
                <ion-label>Profile</ion-label>
              </ion-item>
            </ng-container>

            <ng-template #notLoggedInSide>
              <ion-item button (click)="openAuthModal(enumAuthSegment.login)">
                <ion-icon slot="start" name="key"></ion-icon>
                <ion-label>Log in</ion-label>
              </ion-item>
              <ion-item button (click)="openAuthModal(enumAuthSegment.register)">
                <ion-icon slot="start" name="key"></ion-icon>
                <ion-label>Sign up</ion-label>
              </ion-item>
            </ng-template>

          </ion-menu-toggle>
        </ion-list>
      </ion-content>
    </ion-menu>
  </section> -->

  <!-- Mobile -->
  <ng-container *ngIf="(screensize.size$ | async) === 'mobile' else desktop">
    <ion-nav [root]="rootPage"></ion-nav>
  </ng-container>

  <ng-template #desktop>
    <!-- Main navbar -->
    <ion-header>
      <ion-toolbar>
        <header fxLayout fxLayoutAlign="space-between center">
          <a routerLink="/">
            <img asset="logo.png" class="logo">
          </a>
          <section fxLayout>
            <ion-button fill="clear" routerLink="/" routerDirection="root" routerLinkActive="active-link">
              Home
            </ion-button>
            <ion-button fill="clear" routerLink="/explore" routerDirection="root" routerLinkActive="active-link">
              Explore
            </ion-button>

            <ng-container *ngIf="user.profile$ | async as profile; else notLoggedInMain">
              <ion-button fill="clear" routerLink="/goals" routerDirection="root" routerLinkActive="active-link">
                Goals
              </ion-button>
              <ion-button fill="clear" routerLink="/supports" routerDirection="root" routerLinkActive="active-link">
                Supports
              </ion-button>
              <ion-avatar [ngClass]="{'badge': unreadNotifications$ | async}" (click)="openProfilePopover($event)">
                <img [ref]="profile.photoURL" asset="profile.png"/>
              </ion-avatar>
            </ng-container>

            <ng-template #notLoggedInMain>
              <ion-button fill="clear" (click)="openAuthModal(enumAuthSegment.login)">
                Log In
              </ion-button>
              <ion-button fill="clear" (click)="openAuthModal(enumAuthSegment.register)">
                Sign Up
              </ion-button>
            </ng-template>

          </section>
        </header>  
      </ion-toolbar>
    </ion-header>

    <ion-router-outlet id="main"></ion-router-outlet>
  </ng-template>
</ion-app>