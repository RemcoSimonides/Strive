<ion-app>

  <ng-container *ngIf="(screensize.size$ | async) === 'mobile' else desktop">
    <ion-nav [root]="rootPage"></ion-nav>
  </ng-container>

  <ng-template #desktop>
    <ion-header>
      <ion-toolbar>
        <header>
          <a routerLink="/">
            <img asset="strivejournal-without-margin.png" class="logo">
          </a>
          <section>

            <ng-container *ngIf="profile$ | async as user; else notLoggedInMain">
              <ion-button fill="clear" routerLink="/goals" routerDirection="root" routerLinkActive="active-link">
                Goals
              </ion-button>
              <ion-button [ngClass]="{'badge2': hasSupportNeedingDecision$ | async}" fill="clear" routerLink="/supports" routerDirection="root" routerLinkActive="active-link">
                Supports
              </ion-button>
              <ion-button fill="clear" routerLink="/explore" routerDirection="root" routerLinkActive="active-link">
                Explore
              </ion-button>
              <ion-button fill="clear" routerLink="/exercise" routerDrouterDirection="root" routerLinkActive="active-link">
                Exercises
              </ion-button>
              <ion-avatar [ngClass]="{'badge': unreadNotifications$ | async}" (click)="openUserPopover($event)">
                <img [ref]="user.photoURL" asset="profile.png" [width]="60" [height]="60"/>
              </ion-avatar>
            </ng-container>

            <ng-template #notLoggedInMain>
              <ion-button fill="clear" routerLink="/" routerDirection="root" routerLinkActive="active-link">
                Home
              </ion-button>
              <ion-button fill="clear" routerLink="/explore" routerDirection="root" routerLinkActive="active-link">
                Explore
              </ion-button>
              <ion-button fill="clear" (click)="openAuthModal(enumAuthSegment.login)">
                Log In
              </ion-button>
              <ion-button fill="clear" (click)="openAuthModal(enumAuthSegment.register)">
                Sign Up
              </ion-button>
            </ng-template>

          </section>
        </header>  
      </ion-toolbar>
    </ion-header>

    <ion-router-outlet id="main"></ion-router-outlet>
  </ng-template>
</ion-app>