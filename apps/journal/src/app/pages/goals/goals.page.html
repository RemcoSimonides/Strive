<strive-header title="Goals" *ngIf="platform.is('android') || platform.is('ios')"></strive-header>

<ion-content class="ion-no-padding">
  <ng-container *ngIf="!!user.uid else notLoggedIn">

    <!-- Goals -->
    <h2>Your Goals</h2>
    <section class="goals">
      <small-thumbnail title="CREATE GOAL" asset="create_goal.jpeg"></small-thumbnail>
      <ng-container *ngFor="let goal of goals$ | async">
        <small-thumbnail [title]="goal.title" [image]="goal.image" asset="goal.jpeg" [isFinished]="goal.isFinished" [routerLink]="'/goal/' + goal.id">
          <small>
            {{ goal.numberOfSupporters }} Supporter{goal.numberOfSupporters, plural, =1 {} other {s}}<br/>
            {{ goal.numberOfAchievers }} Achiever{goal.numberOfAchievers, plural, =1 {} other {s}}
          </small>
        </small-thumbnail>
      </ng-container>
    </section>

    <!-- Collective goals -->
    <h2>Your Collective Goals</h2>
    <section class="collective">
      <large-thumbnail title="CREATE COLLECTIVE GOAL" asset="create_goal.jpeg"></large-thumbnail>
      <ng-container *ngFor="let collectiveGoal of collectiveGoals$ | async">
        <large-thumbnail [title]="collectiveGoal.title" [image]="collectiveGoal.image" asset="collective-goal.jpeg" [routerLink]="['/collective-goal', collectiveGoal.id]">
          <small>{{ collectiveGoal.numberOfAchievers }} Achiever{collectiveGoal.numberOfAchievers, plural, =1 {} other {s}}</small>
        </large-thumbnail>
      </ng-container>
    </section>

  </ng-container>
</ion-content>

<ng-template #notLoggedIn>
  <section class="not-logged-in">
    <p>
        <span class="fat-text-button" (click)="openAuthModal()">Log in</span>to view your goals
    </p>
  </section>
</ng-template>