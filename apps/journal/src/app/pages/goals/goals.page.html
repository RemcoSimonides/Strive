<app-header title="Goals" *ngIf="_platform.is('android') || _platform.is('ios')"></app-header>

<div class="not-logged-in" *ngIf="!user.isLoggedIn$ | async">
    <p>
        <span class="fat-text-button" (click)="openAuthModal()">Log in</span>to view your goals
    </p>
</div>

<ion-content *ngIf="user.isLoggedIn$ | async" class="ion-no-padding">

    <!-- Goals -->
    <h3>Your Goals</h3>

    <thumbnail-list type="goal" [canCreate]="true">
      <ng-container *ngFor="let goal of goalsColObs | async">
        <ng-template #thumb>
          <rectangle-thumbnail type="goal" [image]="goal.image" [routerLink]="'/goal/' + goal.id">
            <ng-template #thumbTitle>
              <h5>{{ goal.title }}</h5>
              <p>{{ goal.numberOfSupporters }} Supporter{goal.numberOfSupporters, plural, =1 {} other {s}}</p>
              <p>{{ goal.numberOfAchievers }} Achiever{goal.numberOfAchievers, plural, =1 {} other {s}}</p>
            </ng-template>
          </rectangle-thumbnail>
        </ng-template>
      </ng-container>
    </thumbnail-list>

    <!-- Collective goals -->
    <h3>Your Collective Goals</h3>

    <thumbnail-list type="collectiveGoal" [canCreate]="true">
      <ng-container *ngFor="let collectiveGoal of collectiveGoalsColObs | async">
        <ng-template #thumb>
          <rectangle-thumbnail type="collectiveGoal" [image]="collectiveGoal.image" [routerLink]="['/collective-goal', collectiveGoal.id]">
            <ng-template #thumbTitle>
              <h5>{{ collectiveGoal.title }}</h5>
              <p>{{ collectiveGoal.numberOfAchievers }} Achiever{goal.numberOfAchievers, plural, =1 {} other {s}}</p>
            </ng-template>
          </rectangle-thumbnail>
        </ng-template>
      </ng-container>
    </thumbnail-list>

</ion-content>