<ng-container *ngIf="pageIsLoading">
  <strive-page-loading></strive-page-loading>
</ng-container>

<ng-container *ngIf="!canAccess && !pageIsLoading">
  <strive-page-not-found></strive-page-not-found>
</ng-container>

<ng-container *ngIf="canAccess && !pageIsLoading">
  <ion-segment [value]="segmentChoice" (ionChange)="segmentChanged($event)" class="ion-align-self-center" mode="md">
    <ion-segment-button value="goal">
      Goal
    </ion-segment-button>
    <ion-segment-button value="roadmap">
      Roadmap
    </ion-segment-button>
    <ion-segment-button value="story">
      Story
    </ion-segment-button>
  </ion-segment>
</ng-container>

<ion-content class="ion-padding" [ngSwitch]="segmentChoice" *ngIf="canAccess && !pageIsLoading">

  <section *ngSwitchCase="'goal'">
    <journal-goal (segmentChange)="segmentChoice = $event"></journal-goal>
  </section>

  <!-- Roadmap -->
  <section *ngSwitchCase="'roadmap'">
    <journal-goal-roadmap [goal]="goal"></journal-goal-roadmap>
  </section>

  <!-- Posts -->
  <section *ngSwitchCase="'story'">
    <journal-goal-posts [goal]="goal"></journal-goal-posts>
  </section>

</ion-content>

<ion-fab *ngIf="segmentChoice === 'story'" vertical="bottom" horizontal="end" slot="fixed">
  <ion-fab-button (click)="createCustomPost()"><ion-icon name="add"></ion-icon></ion-fab-button>
</ion-fab>