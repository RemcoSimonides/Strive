<strive-header [title]="(template$ | async)?.title || 'Template'" *ngIf="platform.is('android') || platform.is('ios')"></strive-header>
<ion-content class="ion-padding">
  <ng-container *ngIf="template$ | async as template">
    <section fxLayout="column">

      <h1>{{ template.title }}</h1>
      <strive-text-editor [description]="template.description" 
        [isAdmin]="isAdmin | async"
        (update)="saveDescription($event)"
      ></strive-text-editor>

      <ion-card>
        <ion-card-header>
          <article fxLayout fxLayoutAlign="space-between">
            <div>
              <b>{{ template.goalTitle }}</b>
              <ng-container *ngIf="!!template.goalDeadline">
                <fa-icon [icon]="['fas', 'stopwatch']"></fa-icon> {{ template.goalDeadline | date:'fullDate' }}
              </ng-container>
            </div>
            <ng-container *ngIf="isAdmin | async">
              <ion-button (click)="presentTemplateOptionsPopover($event)" fill="clear">
                <ion-icon slot="icon-only" name="ellipsis-vertical"></ion-icon>
              </ion-button>
            </ng-container>
          </article>
        </ion-card-header>
        <ion-card-content>
          <article fxLayout fxLayout.lt-sm="column">
            <div>
              {{ template.goalShortDescription }}
            </div>
            <img src="{{ template.goalImage }}"/>
          </article>

          <ion-button (click)="useTemplate()" fill="outline">Use Template</ion-button>
        </ion-card-content>
      </ion-card>

      <h3>Roadmap</h3>
      <app-default-roadmap [collectiveGoalId]="collectiveGoalId" [templateId]="templateId"></app-default-roadmap>
    </section>
  </ng-container>
</ion-content>